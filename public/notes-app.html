<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Notes App - Like Google Keep</title>
  <style>
    :root {
      --bg: var(--background, #f5f5f5);
      --text: var(--foreground, #333);
      --card: var(--card, #fff);
      --accent: var(--primary, #4285f4);
      --border: var(--border, #e0e0e0);
      --input: var(--input, #eee);
      --shadow: 0 1px 2px 0 rgba(0,0,0,0.05);
    }
    
    body {
      margin: 0;
      font-family: 'Roboto', 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background-color 0.3s, color 0.3s;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .search-bar {
      margin: 1rem;
    }
    .search-bar input {
      width: 100%;
      padding: 10px 16px;
      border: 1px solid var(--border);
      border-radius: 50px;
      font-size: 1rem;
      box-shadow: var(--shadow);
      outline: none;
      background-color: var(--card);
      color: var(--text);
    }
    .search-bar input:focus {
        border-color: var(--accent);
    }

    .container {
      padding: 0 1rem 1rem;
    }

    .new-note {
      background: var(--card);
      margin-bottom: 24px;
      padding: 15px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    .new-note textarea {
      width: 100%;
      border: none;
      outline: none;
      font-size: 1.1rem;
      resize: none;
      background: transparent;
      color: var(--text);
    }
    .new-note .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      opacity: 0;
      transition: opacity 0.3s;
      max-height: 0px;
    }
    .new-note:focus-within .toolbar {
      opacity: 1;
      max-height: 100px;
    }
    .colors {
      display: flex;
      gap: 8px;
    }
    .color {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
      transition: transform 0.2s;
    }
    .color:hover {
        transform: scale(1.1);
    }
    .color.selected {
      border-color: var(--accent);
    }
    #addBtn {
        background-color: var(--accent);
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        cursor: pointer;
        font-weight: 500;
    }

    .notes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 16px;
    }
    .note {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.2s ease-in-out;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .note:hover {
      transform: translateY(-4px);
      border-color: var(--accent);
    }
    .note.pinned::after {
      content: "üìå";
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 1.2rem;
    }
    .note-content {
      white-space: pre-wrap;
      word-wrap: break-word;
      margin-bottom: 10px;
      line-height: 1.5;
      flex-grow: 1;
    }
    .note-tags {
      font-size: 0.8rem;
      color: var(--accent);
      margin-bottom: 10px;
      word-wrap: break-word;
    }
    .note-actions {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 4px;
      opacity: 0;
      transition: opacity 0.3s;
      margin-top: auto;
    }
    .note:hover .note-actions {
      opacity: 1;
    }
    .note-actions button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      padding: 5px;
      color: var(--text);
      opacity: 0.7;
    }
    .note-actions button:hover {
        opacity: 1;
        color: var(--accent);
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: gray;
      font-size: 1.1rem;
      grid-column: 1 / -1;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search notes..." />
  </div>

  <div class="container">
    <div class="new-note">
      <textarea id="noteInput" placeholder="Take a note..." rows="1"></textarea>
      <div class="toolbar">
        <div class="colors">
          <div class="color" style="background:var(--card)" data-color="var(--card)"></div>
          <div class="color" style="background:#f28b82" data-color="#f28b82"></div>
          <div class="color" style="background:#fbbc04" data-color="#fbbc04"></div>
          <div class="color" style="background:#fff475" data-color="#fff475"></div>
          <div class="color" style="background:#ccff90" data-color="#ccff90"></div>
          <div class="color" style="background:#a7ffeb" data-color="#a7ffeb"></div>
          <div class="color" style="background:#cbf0f8" data-color="#cbf0f8"></div>
          <div class="color" style="background:#d7aefb" data-color="#d7aefb"></div>
        </div>
        <button id="addBtn">Add</button>
      </div>
    </div>

    <div class="notes-grid" id="notesGrid">
      <div class="empty-state">No notes yet. Create your first one! ‚ú®</div>
    </div>
  </div>

  <script>
    const noteInput = document.getElementById('noteInput');
    const addBtn = document.getElementById('addBtn');
    const notesGrid = document.getElementById('notesGrid');
    const searchInput = document.getElementById('searchInput');
    let selectedColor = 'var(--card)';
    let notes = JSON.parse(localStorage.getItem('notes-v2')) || [];
    let editId = null;

    // Auto-resize textarea
    noteInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = this.scrollHeight + 'px';
    });

    // Color selection
    document.querySelectorAll('.color').forEach(c => {
      c.addEventListener('click', () => {
        document.querySelectorAll('.color').forEach(x => x.classList.remove('selected'));
        c.classList.add('selected');
        selectedColor = c.dataset.color;
      });
    });

    // Add or update note
    function addNote() {
      const text = noteInput.value.trim();
      if (!text) return;

      if (editId !== null) {
        notes = notes.map(n => n.id === editId ? {...n, content: text, color: selectedColor, tags: extractTags(text), updatedAt: Date.now()} : n);
        editId = null;
      } else {
        const note = {
          id: Date.now(),
          content: text,
          color: selectedColor,
          pinned: false,
          tags: extractTags(text),
          createdAt: Date.now(),
          updatedAt: Date.now()
        };
        notes.unshift(note);
      }

      saveAndRender();
      noteInput.value = '';
      noteInput.style.height = 'auto';
      selectedColor = 'var(--card)';
      document.querySelectorAll('.color').forEach(x => x.classList.remove('selected'));
    }

    addBtn.addEventListener('click', addNote);
    noteInput.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        addNote();
      }
    });

    function extractTags(text) {
      const matches = text.match(/#\w+/g);
      return matches ? matches.map(t => t.slice(1)) : [];
    }

    function saveAndRender() {
      localStorage.setItem('notes-v2', JSON.stringify(notes));
      renderNotes();
    }

    function renderNotes(filter = '') {
      const filtered = notes
        .filter(n => n.content.toLowerCase().includes(filter.toLowerCase()) || n.tags.some(t => t.toLowerCase().includes(filter.toLowerCase())))
        .sort((a, b) => (b.pinned - a.pinned) || b.updatedAt - a.updatedAt);

      notesGrid.innerHTML = filtered.length === 0 && !filter
        ? '<div class="empty-state">No notes yet. Create one above! ‚ú®</div>'
        : filtered.length === 0 && filter
        ? '<div class="empty-state">No notes match your search. üòî</div>'
        : '';
        

      filtered.forEach(note => {
        const noteEl = document.createElement('div');
        noteEl.className = `note ${note.pinned ? 'pinned' : ''}`;
        noteEl.style.background = note.color;
        
        const contentHtml = new DOMParser().parseFromString(note.content, 'text/html').body.innerHTML;

        noteEl.innerHTML = `
          <div class="note-content">${contentHtml}</div>
          ${note.tags.length ? '<div class="note-tags">#' + note.tags.join(' #') + '</div>' : ''}
          <div class="note-actions">
            <button onclick="pinNote(${note.id})" title="Pin Note">üìå</button>
            <button onclick="editNote(${note.id})" title="Edit Note">‚úèÔ∏è</button>
            <button onclick="deleteNote(${note.id})" title="Delete Note">üóëÔ∏è</button>
          </div>
        `;
        notesGrid.appendChild(noteEl);
      });
    }

    window.pinNote = function(id) {
      notes = notes.map(n => n.id === id ? {...n, pinned: !n.pinned, updatedAt: Date.now()} : n);
      saveAndRender();
    }

    window.editNote = function(id) {
      const note = notes.find(n => n.id === id);
      noteInput.value = note.content;
      
      document.querySelectorAll('.color').forEach(x => x.classList.remove('selected'));
      const colorButton = document.querySelector(`.color[data-color="${note.color}"]`);
      if(colorButton) {
          colorButton.classList.add('selected');
      }
      selectedColor = note.color;

      editId = id;
      noteInput.focus();
      noteInput.style.height = 'auto';
      noteInput.style.height = noteInput.scrollHeight + 'px';
    }

    window.deleteNote = function(id) {
      if (confirm('Are you sure you want to delete this note?')) {
        notes = notes.filter(n => n.id !== id);
        saveAndRender();
      }
    }

    searchInput.addEventListener('input', e => renderNotes(e.target.value));

    // Initial render
    renderNotes();
  </script>
</body>
</html>

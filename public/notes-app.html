<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Notes App - Like Google Keep</title>
  <style>
    :root {
      --bg: #f5f5f5;
      --text: #333;
      --card: #fff;
      --accent: #4285f4;
      --shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    [data-theme="dark"] {
      --bg: #121212;
      --text: #e0e0e0;
      --card: #1e1e1e;
      --accent: #8ab4f8;
      --shadow: 0 2px 15px rgba(0,0,0,0.4);
    }
    body {
      margin: 0;
      font-family: 'Roboto', 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s;
    }
    header {
      background: var(--accent);
      color: white;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      position: relative;
    }
    .theme-toggle {
      position: absolute;
      right: 20px;
      top: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .search-bar {
      margin: 20px auto;
      max-width: 600px;
      padding: 0 20px;
    }
    .search-bar input {
      width: 100%;
      padding: 12px 20px;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      box-shadow: var(--shadow);
      outline: none;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .new-note {
      background: var(--card);
      margin-bottom: 30px;
      padding: 15px;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .new-note textarea {
      width: 100%;
      border: none;
      outline: none;
      font-size: 1.1rem;
      resize: none;
      background: transparent;
      color: var(--text);
    }
    .new-note .toolbar {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .new-note:focus-within .toolbar {
      opacity: 1;
    }
    .colors {
      display: flex;
      gap: 8px;
    }
    .color {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      border: 3px solid transparent;
    }
    .color.selected {
      border-color: #000;
    }
    .notes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }
    .note {
      background: var(--card);
      border-radius: 12px;
      padding: 16px;
      box-shadow: var(--shadow);
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }
    .note:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .note.pinned::before {
      content: "üìå";
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 1.2rem;
    }
    .note-title {
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 8px;
    }
    .note-content {
      white-space: pre-wrap;
      margin-bottom: 10px;
      line-height: 1.5;
    }
    .note-tags {
      font-size: 0.8rem;
      color: var(--accent);
      margin-bottom: 10px;
    }
    .note-actions {
      display: flex;
      justify-content: space-between;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .note:hover .note-actions {
      opacity: 1;
    }
    button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2rem;
      padding: 5px;
    }
    .empty-state {
      text-align: center;
      padding: 60px;
      color: gray;
      font-size: 1.2rem;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body data-theme="light">

  <header>
    <h1>üìù My Notes</h1>
    <button class="theme-toggle" id="themeToggle">üåô</button>
  </header>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search notes..." />
  </div>

  <div class="container">
    <div class="new-note">
      <textarea id="noteInput" placeholder="Take a note..." rows="1"></textarea>
      <div class="toolbar">
        <div class="colors">
          <div class="color" style="background:#fff" data-color="#fff"></div>
          <div class="color" style="background:#ff9999" data-color="#ff9999"></div>
          <div class="color" style="background:#99ff99" data-color="#99ff99"></div>
          <div class="color" style="background:#9999ff" data-color="#9999ff"></div>
          <div class="color" style="background:#ffff99" data-color="#ffff99"></div>
          <div class="color" style="background:#ffcc99" data-color="#ffcc99"></div>
          <div class="color" style="background:#ff99cc" data-color="#ff99cc"></div>
          <div class="color" style="background:#c0c0c0" data-color="#c0c0c0"></div>
        </div>
        <button id="addBtn">Add Note</button>
      </div>
    </div>

    <div class="notes-grid" id="notesGrid">
      <div class="empty-state">No notes yet. Create your first one! ‚ú®</div>
    </div>
  </div>

  <script>
    const noteInput = document.getElementById('noteInput');
    const addBtn = document.getElementById('addBtn');
    const notesGrid = document.getElementById('notesGrid');
    const searchInput = document.getElementById('searchInput');
    const themeToggle = document.getElementById('themeToggle');
    let selectedColor = '#fff';
    let notes = JSON.parse(localStorage.getItem('notes')) || [];
    let editId = null;

    // Auto-resize textarea
    noteInput.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = this.scrollHeight + 'px';
    });

    // Color selection
    document.querySelectorAll('.color').forEach(c => {
      c.addEventListener('click', () => {
        document.querySelectorAll('.color').forEach(x => x.classList.remove('selected'));
        c.classList.add('selected');
        selectedColor = c.dataset.color;
      });
    });

    // Add or update note
    function addNote() {
      const text = noteInput.value.trim();
      if (!text) return;

      if (editId !== null) {
        notes = notes.map(n => n.id === editId ? {...n, content: text, color: selectedColor, updatedAt: Date.now()} : n);
        editId = null;
      } else {
        const note = {
          id: Date.now(),
          content: text,
          color: selectedColor,
          pinned: false,
          tags: extractTags(text),
          createdAt: Date.now(),
          updatedAt: Date.now()
        };
        notes.unshift(note);
      }

      saveAndRender();
      noteInput.value = '';
      noteInput.style.height = 'auto';
      selectedColor = '#fff';
      document.querySelector('.color[data-color="#fff"]').classList.add('selected');
    }

    addBtn.addEventListener('click', addNote);
    noteInput.addEventListener('keydown', e => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        addNote();
      }
    });

    function extractTags(text) {
      const matches = text.match(/#\w+/g);
      return matches ? matches.map(t => t.slice(1)) : [];
    }

    function saveAndRender() {
      localStorage.setItem('notes', JSON.stringify(notes));
      renderNotes();
    }

    function renderNotes(filter = '') {
      const filtered = notes
        .filter(n => n.content.toLowerCase().includes(filter.toLowerCase()))
        .sort((a, b) => (b.pinned - a.pinned) || b.updatedAt - a.updatedAt);

      notesGrid.innerHTML = filtered.length === 0
        ? '<div class="empty-state">No notes found üòî</div>'
        : '';

      filtered.forEach(note => {
        const noteEl = document.createElement('div');
        noteEl.className = `note ${note.pinned ? 'pinned' : ''}`;
        noteEl.style.background = note.color;
        noteEl.innerHTML = `
          <div class="note-title">${note.content.split('\n')[0].substring(0, 50)}${note.content.split('\n')[0].length > 50 ? '...' : ''}</div>
          <div class="note-content">${note.content.replace(/\n/g, '<br>')}</div>
          ${note.tags.length ? '<div class="note-tags">#' + note.tags.join(' #') + '</div>' : ''}
          <div class="note-actions">
            <button onclick="pinNote(${note.id})">üìå</button>
            <button onclick="editNote(${note.id})">‚úèÔ∏è</button>
            <button onclick="deleteNote(${note.id})">üóëÔ∏è</button>
          </div>
        `;
        notesGrid.appendChild(noteEl);
      });
    }

    window.pinNote = function(id) {
      notes = notes.map(n => n.id === id ? {...n, pinned: !n.pinned} : n);
      saveAndRender();
    }

    window.editNote = function(id) {
      const note = notes.find(n => n.id === id);
      noteInput.value = note.content;
      selectedColor = note.color;
      document.querySelector(`.color[data-color="${note.color}"]`).classList.add('selected');
      editId = id;
      noteInput.focus();
      noteInput.style.height = noteInput.scrollHeight + 'px';
    }

    window.deleteNote = function(id) {
      if (confirm('Delete this note permanently?')) {
        notes = notes.filter(n => n.id !== id);
        saveAndRender();
      }
    }

    searchInput.addEventListener('input', e => renderNotes(e.target.value));

    // Theme toggle
    themeToggle.addEventListener('click', () => {
      const isDark = document.body.getAttribute('data-theme') === 'dark';
      document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
      themeToggle.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
    });

    // Initial render
    renderNotes();
  </script>
</body>
</html>
